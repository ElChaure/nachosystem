<?php        $params = array("author" => "Pdf test", "title" =>"TCPDF Example 002", "subject" => "TCPDF Tutorial", "keywords"=>array("TCPDF, PDF, example, test, guide"), "header" => false, "footer" => false, "output" => "Solicitudes_pendientes.pdf");          $pdf = Yii::createComponent('application.extensions.tcpdf.ETcPdf', 'P', 'cm', 'Letter', true, 'UTF-8', $params);         $vendedor=Vendedores::model()->findbyPk($data->vendedor_id);    $nomvende=$vendedor->nombre;	    $separarfd = explode('-',$data->fdesde);	$separarfh = explode('-',$data->fhasta);	    $fd=$separarfd[2].'/'.$separarfd[1].'/'.$separarfd[0];	$fh=$separarfh[2].'/'.$separarfh[1].'/'.$separarfh[0];	      $criteria= new CDbCriteria();     $criteria->order='movimiento_id';	 $criteria->condition='vendedor_id='.$data->vendedor_id.' and fecha BETWEEN "'.$data->fdesde.'" and "'.$data->fhasta.'" and neto > 0' ;     $detalle=Salidaenc::model()->findAll($criteria);	      $hoy = date("d/m/y");     $pdf->SetCreator(PDF_CREATOR);     $pdf->SetAuthor("NachoSystem");     $pdf->SetTitle("Reporte de Comisiones");     $pdf->SetSubject("Comision por Vendedor del Inventario");     $pdf->SetKeywords("vendedor_id");     $pdf->SetPrintHeader(true);     $pdf->SetPrintFooter(true);     $pdf->AliasNbPages();     $pdf->SetTopMargin(2);      $pdf->SetHeaderMargin(0.2);     $pdf->SetFooterMargin(1);     $image_file = 'jecatex.png';      $pdf->SetHeaderData($image_file, 18, 'Titulo1', 'Titulo2');     $pdf->SetAutoPageBreak(TRUE, 1);     $pdf->AddPage();         	 	       $pdf->SetFont("times", "IU", 10);     $pdf->SetXY(7,1.50);      $html='<b>Reporte de Comisiones de '.$nomvende.' del '.$fd.' al '.$fh.'</b>';     $pdf->writeHTML($html, true, false, false, false, '');  	      $pdf->SetXY(1,2.5);     $pdf->SetFont("times", "I", 8);	 $html = <<<EOD    <font size="8">    <table border="0" >	<thead>    <tr style="background-color:#C0C0C0;">	        <td width="20"  align="center">Nro</td>        <td width="80" align="center">Documento</td>        <td width="150"  align="center" >Cliente</td>        <td width="50" align="center" >Neto</td>        <td width="50" align="center" >% Comision</td>	    <td width="60" align="center" >Comision</td>    </tr>	</thead>EOD;	 	 $totaliva=0;     $totalnetodoc=0;     $totaldoc=0;	 $total_final=0;	foreach ($detalle as $renglon) {			$salidaenc_id=$renglon->salidaenc_id;			$tiposalida_id=$renglon->tiposalida_id;			$tiposal=Tipossalida::model()->findbyPk($tiposalida_id);			$tiposalida=$tiposal->tiposalida;			$cliente_id=$renglon->cliente_id;			$cliente=Clientes::model()->findbyPk($cliente_id);			$clienom=$cliente->descripcion;			$fecha=$renglon->fecha;			$neto=$renglon->neto;			$comision=$vendedor->comision;			$total_neto=($neto*$comision)/100;			$total_final=$total_final+$total_neto;			//$html =$salidaenc_id." ".$tiposalida;		    $html .=  <<<EOD                <tr>                   <td width="20"  align="left">$salidaenc_id</td>                   <td width="80" align="left">$tiposalida</td>                   <td width="150"  align="left" >$clienom</td>                   <td width="50" align="right" >$neto</td>                   <td width="50" align="right" >$comision</td>				   <td width="60" align="right" >$total_neto</td>                </tr>EOD;//$pdf->writeHTML($html, true, false, false, false, '');}$html .= <<<EOD</table></font>EOD;$pdf->writeHTML($html, true, false, false, false, '');$html='<b>Total Comision: '.$total_final.'</b>';$pdf->writeHTML($html, true, false, false, false, '');	 //$pdf->writeHTML($html, true, false, false, false, '');	 ob_end_clean();	 $pdf->Output("Comisiones.pdf", "I");return $pdf;      ?>  